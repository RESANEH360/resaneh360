"use strict";!function(n,i){var l={hide_selector:".id-row,.symbol1-row,.symbol2-row,.ids-row,.currency-row,.currency1-row,.currency2-row,.currency3-row,.url-row,.target-row,.initial-row,.count-row, .show_logo-row",all_fields:["shortcode","color","fullwidth","id","symbol1","symbol2","ids","currency","currency1","currency2","currency3","url","target","initial","count","show_logo"],fields:{"price-label":".id-row,.currency-row,.url-row,.target-row,.show_logo-row","change-label":".id-row,.url-row,.target-row,.show_logo-row","price-big-label":".id-row,.currency1-row,.currency2-row,.currency3-row,.url-row,.target-row,.show_logo-row","change-big-label":".id,.url-row,.target-row,.show_logo-row","price-card":".id-row,.currency1-row,.currency2-row,.currency3-row,.url-row,.target-row,.show_logo-row","change-card":".id-row,.url-row,.target-row,.show_logo-row","full-card":".id-row,.currency1-row,.currency2-row,.currency3-row,.url-row,.target-row,.show_logo-row",converter:".symbol1-row,.symbol2-row,.initial-row",table:".currency-row,.ids-row,.count-row","small-table":".currency-row,.ids-row,.count-row"},elements:null,init:function(){var e=n("#id-list-selector"),r=n("#id-list-add"),c=n("[name=ids]");r.click(function(){var r=e.val(),o=c.val();o=(o=o.replace(/ /g,"")).length?o+","+r:r,c.val(o)}),this.attach(n("#vcw-admin-builder"),n("#vcw-admin-preview"),n("#vcw-admin-code")),this.refresh()},attach:function(r,o,e){r.submit(!1);var c=l.elements={form:r,submit:r.find(".render-submit"),shortcode:r.find("[name=shortcode]"),preview:o,code:e};c.shortcode.on("change keyup paste",function(){return l.refresh()}),c.submit.click(function(){return l.render()})},hideFields:function(){l.elements.form.find(this.hide_selector).hide()},showFields:function(){var r=l.elements,o=r.shortcode.val();l.fields[o];r.form.find(l.fields[o]).show()},refresh:function(){l.hideFields(),l.showFields()},callRender:function(o){var e=l.elements,c={type:"POST",url:i.ajax_url,data:{action:"vcw_render"}};l.all_fields.forEach(function(r){c.data[r]=e.form.find("[name="+r+"]").val()}),n.ajax(c).done(function(r){r&&r.html&&r.code&&o(r.html,r.code)})},render:function(){var e=l.elements;l.callRender(function(r,o){e.preview.html(r),i.compile(e.preview),e.code.find("textarea").val(o)})}};n(function(){n("#vcw-admin-page").length&&l.init()})}(jQuery,VirtualCoinWidgets);