"use strict";!function(o,t,a){var i={convert:function(t,e,n){return a(n).from(t).to(e)},priceFormat:function(t){t=parseFloat(t);var e=Math.log10(t),n=0;return 4<=e?n=t.toFixed(0):3<=e?n=t.toFixed(1):2<=e?n=t.toFixed(2):1<=e?n=t.toFixed(2):0<=e?n=t.toFixed(3):-1<=e?n=t.toFixed(4):-2<=e?n=t.toFixed(5):-3<=e?n=t.toFixed(6):-4<=e?n=t.toFixed(7):-5<=e?n=t.toFixed(8):-6<=e?n=t.toFixed(8):-7<=e?n=t.toFixed(8):-8<=e&&(n=t.toFixed(8)),n},convertFormatted:function(t,e,n){return this.priceFormat(this.convert(t,e,n))},displayFormat:function(t){t=parseFloat(t);var e=Math.log10(t),n=0;return 4<=e?n=t.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,","):3<=e?n=t.toFixed(1).replace(/\B(?=(\d{3})+(?!\d))/g,","):2<=e?n=t.toFixed(2):1<=e?n=t.toFixed(2):0<=e?n=t.toFixed(3):-1<=e?n=t.toFixed(4):-2<=e?n=t.toFixed(5):-3<=e?n=t.toFixed(6):-4<=e?n=t.toFixed(7):-5<=e?n=t.toFixed(8):-6<=e?n=t.toFixed(8):-7<=e?n=t.toFixed(8):-8<=e&&(n=t.toFixed(8)),n}},c={channels:{},data:{},wss:null,connect:function(){var e=c.channels,t=Object.keys(c.channels);c.wss=new WebSocket("wss://ws.coincap.io/prices?assets="+t.join(",")),c.wss.onmessage=function(t){var c=JSON.parse(t.data);Object.keys(c).forEach(function(a){e[a].forEach(function(t){var e=t[1],n=i.displayFormat(i.convert("USD",t[0],c[a]));n!==e.text()&&e.fadeOut(200,function(){e.text(n).fadeIn(200)})})})}},addToChannel:function(t,e,n){Array.isArray(this.channels[t])||(this.channels[t]=[]),this.channels[t].push([e,n])}};t.compile=function(t){t.find(".vcw price-output").vcwPriceOutput(),t.find(".vcw-price-label, .vcw-change-label, .vcw-price-big-label, .vcw-change-big-label, .vcw-price-card, .vcw-change-card, .vcw-full-card").vcwLink(),t.find(".vcw-converter").vcwConverter()},o.fn.extend({vcwPriceOutput:function(){this.each(function(){var t=o(this),e=t.data("id"),n=t.data("currency");c.addToChannel(e,n,t)})},vcwLink:function(){this.each(function(){var t=o(this),e=t.data("url"),n=t.data("target");e&&t.click(function(){return window.open(e,n)})})},vcwConverter:function(){this.each(function(){var t=o(this),e=t.find(".vcw-currency-1"),n=t.find(".vcw-currency-2"),a=t.find(".vcw-value-1"),c=t.find(".vcw-value-2");e.on("change paste keyup",function(){var t=i.convertFormatted(n.val(),e.val(),c.val());a.val(t)}),a.on("change paste keyup",function(){var t=i.convertFormatted(e.val(),n.val(),a.val());c.val(t)}),n.on("change paste keyup",function(){var t=i.convertFormatted(e.val(),n.val(),a.val());c.val(t)}),c.on("change paste keyup",function(){var t=i.convertFormatted(n.val(),e.val(),c.val());a.val(t)}),c.val(i.convertFormatted(e.val(),n.val(),a.val()))})}}),o.ajax({type:"POST",url:t.ajax_url,data:{action:"vcw_rates"}}).done(function(t){a.rates=t,a.base="USD"}).always(function(){o(function(){t.compile(o(document)),c.connect()})})}(jQuery,VirtualCoinWidgets,fx);